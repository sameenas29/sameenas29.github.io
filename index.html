<html>
  <head>
    <title>Quick Assignment-19 may 2022</title>
    <link rel="stylesheet" type="text/css" href="Index.css" />
  </head>
  <body>
    <div id="app">
      <div id="listContainer"> </div>
      </div>
      <script type="module" src="./Container.js"></script>

      <script type="module">
      import Data from "./Data.js";
      const dataStore = Data;
      let curImageIndex = 0;

      function selectCard(updatedIndex) {
        curImageIndex = updatedIndex;
        document.getElementById('myImage').setAttribute("src",dataStore[curImageIndex].previewImage);
        document.getElementById('inputValue').value = dataStore[curImageIndex].title; 
        Array.from(document.getElementsByClassName('nameTag')).forEach((nameTag) => {
          nameTag.setAttribute('class', 'nameTag');
        })
        document.getElementsByClassName('nameTag')[curImageIndex].setAttribute('class', 'nameTag highlight');
        }

        Array.from(document.getElementsByClassName('nameTag')).forEach(element => {
        element.addEventListener('click', (event) => {
            selectCard(Number(event.currentTarget.dataset.index));
          });
        });

        document.addEventListener('keydown', (event) => {
            switch (event.keyCode) {
            case 37: {
              console.log("Left key is pressed.");
              break;
            }
            case 38: {
              if(curImageIndex==0){
                console.log("nothing");
              }
              else {
                event.preventDefault();
                selectCard(curImageIndex-1);
                console.log("Up key is pressed.");
              }
              break;
            }
            case 39:
              console.log("Right key is pressed.");
              break;
            case 40:

              if(curImageIndex==Data.length-1){
              console.log("nothing");
              }
              else {
                event.preventDefault();
                selectCard(curImageIndex+1);
                console.log("Down key is pressed.");
              }
              break;
          }
        });
      
      document.getElementById("inputValue").addEventListener('keypress',(event) => {
        let curValue = document.getElementById("inputValue").value;
        document.getElementsByClassName('nameTag')[curImageIndex].children[1].children[0].innerHTML = curValue;
        dataStore[curImageIndex].title = curValue;
      });
      </script>

      <script>
        window.addEventListener('load', function() {
          document.getElementsByClassName('nameTag')[0].setAttribute('class', 'nameTag highlight');
        })
      </script>

  </body>
</html>
